<view class="profile-container">
  <!-- å¤´éƒ¨åŒºåŸŸ -->
  <view class="header-section">
    <view class="header-bg"></view>
    <view class="avatar-wrapper">
      <button class="avatar-button" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <image class="avatar-image" src="{{ avatarUrl ? avatarUrl : '/images/default.png' }}" mode="aspectFill"></image>
        <view class="avatar-mask">
          <text class="avatar-text">æ›´æ¢å¤´åƒ</text>
        </view>
      </button>
    </view>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
  <view class="info-card">
    <view class="card-title">
      <view class="title-line"></view>
      <text class="title-text">åŸºæœ¬ä¿¡æ¯</text>
    </view>
    
    <view class="form-item">
      <view class="item-label">
        <text class="label-icon">ğŸ‘¤</text>
        <text class="label-text">æ˜µç§°</text>
      </view>
      <input 
        class="item-input" 
        type="nickname"
        model:value="{{ nick }}"
        placeholder="è¯·è¾“å…¥æ˜µç§°"
        placeholder-class="input-placeholder"
      />
    </view>

    <view class="divider"></view>

    <picker bindchange="bindPickerChange" value="{{ genderIndex }}" range="{{genderArray}}">
      <view class="form-item">
        <view class="item-label">
          <text class="label-icon">âš¥</text>
          <text class="label-text">æ€§åˆ«</text>
        </view>
        <view class="item-value">
          <text class="value-text">{{ gender || 'è¯·é€‰æ‹©' }}</text>
          <text class="arrow-icon">â€º</text>
        </view>
      </view>
    </picker>

    <view class="divider"></view>

    <view class="form-item">
      <view class="item-label">
        <text class="label-icon">ğŸ“±</text>
        <text class="label-text">æ‰‹æœºå·ç </text>
      </view>
      <view class="mobile-wrapper">
        <text class="mobile-text">{{ apiUserInfoMap.base.mobile || 'æœªç»‘å®š' }}</text>
        <view class="bind-btn" bind:tap="bindMobile">
          <text class="bind-text">{{ apiUserInfoMap.base.mobile ? 'æ›´æ¢' : 'ç»‘å®š' }}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ‰©å±•ä¿¡æ¯å¡ç‰‡ -->
  <view class="info-card" wx:if="{{apiUserInfoMap.ext && apiUserInfoMap.ext.length > 0}}">
    <view class="card-title">
      <view class="title-line"></view>
      <text class="title-text">æ‰©å±•ä¿¡æ¯</text>
    </view>
    
    <block wx:for="{{apiUserInfoMap.ext}}" wx:for-index='k' wx:key="index">
      <view class="form-item">
        <view class="item-label">
          <text class="label-icon">ğŸ“</text>
          <text class="label-text">{{ k }}</text>
        </view>
        <input 
          class="item-input" 
          name="{{ k}}"
          value="{{ item }}"
          placeholder="è¯·è¾“å…¥ä¿¡æ¯"
          placeholder-class="input-placeholder"
        />
      </view>
      <view class="divider" wx:if="{{index < apiUserInfoMap.ext.length - 1}}"></view>
    </block>
  </view>

  <!-- ä¿å­˜æŒ‰é’® -->
  <view class="save-section">
    <view class="save-button" bind:tap="formSubmit">
      <text class="save-text">ä¿å­˜ä¿®æ”¹</text>
    </view>
  </view>
</view>

<bind-mobile
  title="ç»‘å®šæ‰‹æœºå·ç "
  alarmText="ä¸ºä¿éšœæ‚¨çš„èµ„é‡‘å®‰å…¨ï¼Œè¯·å…ˆç»‘å®šæ‰‹æœºå·ç "
  show="{{ bindMobileShow }}"
  bind:cancel="bindMobileCancel"
  bind:ok="bindMobileOk"
/>