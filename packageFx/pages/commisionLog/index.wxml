<view class="page-container">
  <!-- å¤´éƒ¨æ ‡é¢˜åŒº -->
  <view class="header-section">
    <view class="header-title">æ¨å¹¿è®¢å•</view>
    <view class="header-subtitle">Promotion Orders</view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{!orderList || orderList.length == 0}}" class="empty-container">
    <van-empty description="æš‚æ— æ¨å¹¿è®¢å•" />
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list" wx:if="{{orderList && orderList.length > 0}}">
    <view class="order-card" wx:for="{{orderList}}" wx:key="index">
      
      <!-- è®¢å•å¤´éƒ¨ -->
      <view class="order-header">
        <view class="order-header-left">
          <view class="order-number">è®¢å•å· {{item.orderNumber}}</view>
          <view class="order-user">
            <text class="user-icon">ğŸ‘¤</text>
            <text>{{item.buyerUserNick}}</text>
          </view>
        </view>
        <view class="order-status {{item.status == -1 ? 'status-cancel' : ''}}">
          {{item.statusStr}}
        </view>
      </view>

      <!-- å•†å“åˆ—è¡¨ -->
      <view class="goods-section">
        <view class="goods-item" wx:for="{{item.goodsList}}" wx:key="id" wx:for-item="g">
          <image class="goods-image" src="{{g.pic}}" mode="aspectFill"></image>
          <view class="goods-content">
            <view class="goods-title">{{g.goodsName}}</view>
            <view class="goods-bottom">
              <view class="goods-price-box">
                <text class="price-symbol">Â¥</text>
                <text class="price-value">{{g.amountSingle}}</text>
                <text class="goods-num">Ã—{{g.number}}</text>
              </view>
            </view>
            <!-- ä½£é‡‘æ ‡ç­¾ -->
            <view class="commission-tag {{g.commisionRecord.isSettlement ? 'settled' : 'pending'}}">
              <view class="commission-rate">{{g.commisionRecord.bili}}% è¿”ä½£</view>
              <view class="commission-amount">
                <text class="amount-icon">ğŸ’°</text>
                <text>{{g.commisionRecord.money}} {{g.commisionRecord.unit==0?'å…ƒ':'ç§¯åˆ†'}}</text>
              </view>
              <view class="settlement-status">
                <text wx:if="{{g.commisionRecord.isSettlement}}" class="status-settled">å·²ç»“ç®—</text>
                <text wx:elif="{{ item.status != -1 }}" class="status-pending">å¾…ç»“ç®—</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- è®¢å•ç»Ÿè®¡ä¿¡æ¯ -->
      <view class="order-summary">
        <view class="summary-row">
          <text class="summary-label">å•†å“æ•°é‡</text>
          <text class="summary-value">{{item.goodsNumber}} ä»¶</text>
        </view>
        <view class="summary-row total">
          <text class="summary-label">è®¢å•é‡‘é¢</text>
          <text class="summary-price">
            <text wx:if="{{item.score <= 0}}">Â¥{{item.amountReal}}</text>
            <text wx:if="{{item.score > 0}}">Â¥{{item.amountReal}} + {{item.score}}ç§¯åˆ†</text>
          </text>
        </view>
        <view class="summary-row commission">
          <text class="summary-label">ç´¯è®¡ä½£é‡‘</text>
          <text class="commission-value">Â¥{{item.totalCommision}}</text>
        </view>
      </view>

      <!-- åº•éƒ¨ä¿¡æ¯ -->
      <view class="order-footer">
        <view class="footer-info">
          <text class="footer-icon">ğŸ•’</text>
          <text class="footer-text">{{item.dateAdd}}</text>
        </view>
        <view wx:if="{{ userInviter[item.goodsList[0].commisionRecord.uids] }}" class="footer-info seller">
          <text class="footer-icon">ğŸ‘¨â€ğŸ’¼</text>
          <text class="footer-text">é”€å”®å‘˜ï¼š{{userInviter[item.goodsList[0].commisionRecord.uids].nick}}</text>
        </view>
        <view wx:if="{{item.remark && item.remark != ''}}" class="order-remark">
          <text class="remark-icon">ğŸ“</text>
          <text>{{item.remark}}</text>
        </view>
      </view>

    </view>
  </view>

  <view class="safeAreaOldMarginBttom safeAreaNewMarginBttom"></view>
</view>