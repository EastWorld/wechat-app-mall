<!-- é¡µé¢å¤´éƒ¨ -->
<view class="page-header">
  <view class="header-title">
    <view class="title-icon">ğŸ•’</view>
    <text class="title-text">å†å²è´­ä¹°</text>
    <view class="title-count" wx:if="{{ goods && goods.length > 0 }}">{{ goods.length }}ä»¶å•†å“</view>
  </view>
</view>

<!-- æœç´¢æ  -->
<van-sticky>
  <view class="search-container">
    <van-search value="{{ value }}" placeholder="æœç´¢æµè§ˆè¿‡çš„å•†å“" bind:search="search2" bind:clear="search3" shape="round" />
  </view>
  
  <!-- ç­›é€‰æ¡ä»¶ -->
  <view class="filters-wrapper">
    <view class="filters">
      <view class="filter-item">
        <picker bindchange="categoryChange" value="{{ categoryIndex }}" range="{{ categories }}" range-key="name">
          <view class="picker-content {{categoryIndex != -1 ? 'active' : ''}}">
            <text class="picker-icon">ğŸ“¦</text>
            <text class="picker-text">{{ categoryIndex == -1 ? 'å…¨éƒ¨åˆ†ç±»' : categories[categoryIndex].name }}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <view class="filter-divider"></view>
      <view class="filter-item">
        <picker bindchange="dayChange" value="{{ dayIndex }}" range="{{ dayArray }}">
          <view class="picker-content {{dayIndex != -1 ? 'active' : ''}}">
            <text class="picker-icon">â°</text>
            <text class="picker-text">{{ dayIndex == -1 ? 'å…¨éƒ¨æ—¶é—´' : dayArray[dayIndex] }}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
    </view>
  </view>
</van-sticky>

<!-- ç©ºçŠ¶æ€ -->
<view wx:if="{{ !goods || goods.length == 0 }}" class="empty-container">
  <view class="empty-content">
    <view class="empty-icon">ğŸ›ï¸</view>
    <view class="empty-text">æš‚æ— æµè§ˆè®°å½•</view>
    <view class="empty-tip">å¿«å»é€›é€›å§ï½</view>
    <navigator url="/pages/index/index" open-type="switchTab" class="empty-btn">å»é¦–é¡µçœ‹çœ‹</navigator>
  </view>
</view>

<!-- å•†å“åˆ—è¡¨ -->
<view class="goods-container" wx:if="{{ goods && goods.length > 0 }}">
  <view class="list2-box">
    <view class="list2" wx:for="{{goods}}" wx:key="id">
      <navigator url="/pages/goods-details/index?id={{ item.goodsId }}" class="goods-card">
        <!-- å•†å“å›¾ç‰‡ -->
        <view class="img-wrapper">
          <image class="img" mode="aspectFill" src="{{item.pic}}" lazy-load></image>
          <view class="viewed-badge">å·²æµè§ˆ</view>
        </view>
        
        <!-- å•†å“ä¿¡æ¯ -->
        <view class="goods-info">
          <view class="title van-multi-ellipsis--l2">{{item.goodsName}}</view>
          
          <!-- ä»·æ ¼åŒºåŸŸ -->
          <view class="price-section">
            <view class="price-wrapper">
              <text class="price-symbol">Â¥</text>
              <text class="price-value">{{item.minPrice || '0.00'}}</text>
            </view>
            <view class="sales-info" wx:if="{{item.numberSells}}">
              <text>{{item.numberSells}}äººä»˜æ¬¾</text>
            </view>
          </view>
          
          <!-- æ ‡ç­¾ -->
          <view class="tags" wx:if="{{item.dateAdd}}">
            <view class="tag">
              <text class="tag-text">{{item.dateAdd}}</text>
            </view>
          </view>
        </view>
      </navigator>
      
      <!-- å¿«æ·æ“ä½œæŒ‰é’® -->
      <view class="quick-actions">
        <navigator url="/pages/goods-details/index?id={{ item.goodsId }}" class="action-btn primary">
          <text>å†çœ‹çœ‹</text>
        </navigator>
      </view>
    </view>
  </view>
</view>

<!-- åŠ è½½æç¤º -->
<view class="loading-tip" wx:if="{{ goods && goods.length > 0 }}">
  <text>â€” å‘ä¸‹æ»‘åŠ¨åŠ è½½æ›´å¤š â€”</text>
</view>
