"use strict";function t(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}Component({data:{ctrl:{}},properties:{childs:Array,opts:Array},options:{addGlobalClass:!0},attached:function(){this.triggerEvent("add",this,{bubbles:!0,composed:!0})},methods:{noop:function(){},getNode:function(t){try{for(var r=t.split("_"),e=this.data.childs[r[0]],i=1;i<r.length;i++)e=e.children[r[i]];return e}catch(t){return{text:"",attrs:{},children:[]}}},play:function(t){if(this.root.triggerEvent("play"),this.root.data.pauseVideo){for(var r=!1,e=t.target.id,i=this.root._videos.length;i--;)this.root._videos[i].id===e?r=!0:this.root._videos[i].pause();if(!r){var s=wx.createVideoContext(e,this);s.id=e,this.root._videos.push(s)}}},imgTap:function(t){var r=this.getNode(t.target.dataset.i);if(r.a)return this.linkTap(r.a);if(!r.attrs.ignore&&(this.root.triggerEvent("imgtap",r.attrs),this.root.data.previewImg)){var e=this.root.imgList[r.i];wx.previewImage({showmenu:this.root.data.showImgMenu,current:e,urls:this.root.imgList})}},imgLoad:function(r){var e,i=r.target.dataset.i,s=this.getNode(i);s.w?(this.data.opts[1]&&!this.data.ctrl[i]||-1===this.data.ctrl[i])&&(e=1):e=r.detail.width,e&&this.setData(t({},"ctrl."+i,e))},linkTap:function(t){var r=t.currentTarget?this.getNode(t.currentTarget.dataset.i):{},e=r.attrs||t,i=e.href;this.root.triggerEvent("linktap",Object.assign({innerText:this.root.getText(r.children||[])},e)),i&&("#"===i[0]?this.root.navigateTo(i.substring(1)).catch(function(){}):i.split("?")[0].includes("://")?this.root.data.copyLink&&wx.setClipboardData({data:i,success:function(){return wx.showToast({title:"链接已复制"})}}):wx.navigateTo({url:i,fail:function(){wx.switchTab({url:i,fail:function(){}})}}))},mediaError:function(r){var e=r.target.dataset.i,i=this.getNode(e);if("video"===i.name||"audio"===i.name){var s=(this.data.ctrl[e]||0)+1;if(s>i.src.length&&(s=0),s<i.src.length)return this.setData(t({},"ctrl."+e,s))}else"img"===i.name&&this.data.opts[2]&&this.setData(t({},"ctrl."+e,-1));this.root&&this.root.triggerEvent("error",{source:i.name,attrs:i.attrs,errMsg:r.detail.errMsg})}}});